%% Assess the bin location of wire return, the mean and variance.
% Data is from a with-wire scan on 20140812 at UML. 
% Zhan Li, zhanli86@bu.edu
% Created: 20150126

inwiredir = ['/projectnb/echidna/lidar/DWEL_Processing/DWEL_TestCal/cal-nsf-' ...
         '20140812/cal-nsf-20140812-wire-returns-summary'];

inwirefiles1064 = { ...
'cal_nsf_20140812_0.5_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_1.5_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_10_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_11_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_12_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_13_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_14_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_15_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_1_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_2.5_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_20_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_25_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_2_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_3.5_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_30_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_35_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_3_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_4.5_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_40_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_4_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_5.5_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_50_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_5_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_6.5_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_60_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_6_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_7.5_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_70_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_7_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_8.5_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_8_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_9.5_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_9_1064_cube_bsfix_pxc_update_filtfix_wire.log', ...
};

inwirefiles1548 = { ...
'cal_nsf_20140812_0.5_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_1.5_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_10_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_11_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_12_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_13_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_14_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_15_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_1_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_2.5_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_20_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_25_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_2_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_3.5_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_30_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_35_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_3_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_4.5_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_40_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_4_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_5.5_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_50_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_5_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_6.5_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_60_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_6_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_7.5_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_70_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_7_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_8.5_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_8_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_9.5_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
'cal_nsf_20140812_9_1548_cube_bsfix_pxc_update_filtfix_wire.log', ...
};

outstatsfile1064 = 'cal_nsf_20140812_1064_wire_stats.txt';
outstatsfile1548 = 'cal_nsf_20140812_1548_wire_stats.txt';

wireposstats1064 = zeros(length(inwirefiles1064), 2);
outfid = fopen(fullfile(inwiredir, outstatsfile1064), 'w');
fprintf(outfid, 'file,max_pos_mean,max_pos_sd,max_mean,max_sd\n');
for f=1:length(inwirefiles1064)
    fid = fopen(fullfile(inwiredir, inwirefiles1064{f}), 'r');
    data = textscan(fid, repmat('%f', 1, 8), 'HeaderLines', 2, 'Delimiter', ',');
    fclose(fid);
    data = cell2mat(data);
    wireposstats1064(f, :) = [mean(data(:,1)), std(data(:,1))];
    fprintf(outfid, '%s,%.3f,%.3f,%.3f,%.3f\n', inwirefiles1064{f}, wireposstats1064(f, 1), wireposstats1064(f, 2), mean(data(:,2)), std(data(:,2)));
end
fclose(outfid);

wireposstats1548 = zeros(length(inwirefiles1548), 2);
outfid = fopen(fullfile(inwiredir, outstatsfile1548), 'w');
fprintf(outfid, 'file,max_pos_mean,max_pos_sd,max_mean,max_sd\n');
for f=1:length(inwirefiles1548)
    fid = fopen(fullfile(inwiredir, inwirefiles1548{f}), 'r');
    data = textscan(fid, repmat('%f', 1, 8), 'HeaderLines', 2, 'Delimiter', ',');
    fclose(fid);
    data = cell2mat(data);
    wireposstats1548(f, :) = [mean(data(:,1)), std(data(:,1))];
    fprintf(outfid, '%s,%.3f,%.3f,%.3f,%.3f\n', inwirefiles1548{f}, wireposstats1548(f, 1), wireposstats1548(f, 2), mean(data(:,2)), std(data(:,2)));
end
fclose(outfid);
